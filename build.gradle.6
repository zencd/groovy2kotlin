plugins {
    id 'groovy'
    id 'java'
    id 'application'
}

group 'groovy2kotlin'
version '1.0-SNAPSHOT'

sourceCompatibility = 1.8

application {
    mainClassName = "gtk.Main"
}

jar {
    manifest {
        attributes(
                'Main-Class': application.mainClassName
        )
    }
}

repositories {
    mavenCentral()
}

dependencies {
    compile 'org.codehaus.groovy:groovy-all:2.5.8'
    testImplementation group: 'org.junit.jupiter', name: 'junit-jupiter', version: '5.4.0'
}

test {
    useJUnitPlatform()
}

task uberjar(type: Jar, dependsOn: [':compileJava', ':compileGroovy']) {
    from files(sourceSets.main.output.classesDirs)
    from configurations.runtime.asFileTree.files.collect { zipTree(it) }

    // a check for host's compatibility with JBrowserDriver
    // which requires either Oracle's JDK 8 or apt package 'openjfx' presented
    // https://github.com/MachinePublishers/jBrowserDriver
    //Class.forName('com.sun.webkit.network.CookieManager')

    manifest {
        attributes 'Main-Class': application.mainClassName
    }
}
